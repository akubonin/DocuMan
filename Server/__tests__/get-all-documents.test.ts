import { describe, expect, test, it} from '@jest/globals';
import supertest from 'supertest';
import {server} from '../src/index.ts'

const requestWithSupertest = supertest(server);

describe("Should get documents from database", () => {
  it('should connect to server and get documents', async () => {
    const res = await requestWithSupertest.get('/alldocuments');
    expect(res.status).toEqual(201)
    expect(res.body).toEqual([{
      "_id": "65aebd5ce57f36d066ff99df",
      "workpackage": " 3",
      "documents": "{\"Rechnung\":[\"{\\\"_id\\\":\\\"65aa8e168bf8c398eb893deb\\\",\\\"filename\\\":\\\"Rechnung 3-0.jpg\\\",\\\"text\\\":\\\"[\\\\\\\"firmenlogo\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"-\\\\\\\",\\\\\\\"musterstr.\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"-\\\\\\\",\\\\\\\"41321\\\\\\\",\\\\\\\"musterstadt\\\\\\\",\\\\\\\"frau\\\\\\\",\\\\\\\"britta\\\\\\\",\\\\\\\"beispiel\\\\\\\",\\\\\\\"beispielstr.\\\\\\\",\\\\\\\"27\\\\\\\",\\\\\\\"54657\\\\\\\",\\\\\\\"beispielstadt\\\\\\\",\\\\\\\"deutschland\\\\\\\",\\\\\\\"so\\\\\\\",\\\\\\\"erreichen\\\\\\\",\\\\\\\"sie\\\\\\\",\\\\\\\"uns\\\\\\\",\\\\\\\"internet\\\\\\\",\\\\\\\"www.mustermann.de\\\\\\\",\\\\\\\"e-mail\\\\\\\",\\\\\\\"max@muster.de\\\\\\\",\\\\\\\"telefon\\\\\\\",\\\\\\\"01234/987654-0\\\\\\\",\\\\\\\"telefax\\\\\\\",\\\\\\\"01234/987654-1\\\\\\\",\\\\\\\"mobil\\\\\\\",\\\\\\\"01234/987654-2\\\\\\\",\\\\\\\"steuer-nr.\\\\\\\",\\\\\\\"122/5432/1234\\\\\\\",\\\\\\\"ust-idnr.\\\\\\\",\\\\\\\"de123456789\\\\\\\",\\\\\\\"datum\\\\\\\",\\\\\\\"01.01.2023\\\\\\\",\\\\\\\"kunde\\\\\\\",\\\\\\\"123456\\\\\\\",\\\\\\\"rechnung\\\\\\\",\\\\\\\"202210001\\\\\\\",\\\\\\\"sehr\\\\\\\",\\\\\\\"geehrte\\\\\\\",\\\\\\\"frau\\\\\\\",\\\\\\\"beispiel,\\\\\\\",\\\\\\\"nachfolgend\\\\\\\",\\\\\\\"berechnen\\\\\\\",\\\\\\\"wir\\\\\\\",\\\\\\\"ihnen\\\\\\\",\\\\\\\"wie\\\\\\\",\\\\\\\"vorab\\\\\\\",\\\\\\\"besprochen:\\\\\\\",\\\\\\\"rechnung\\\\\\\",\\\\\\\"202210001\\\\\\\",\\\\\\\"das\\\\\\\",\\\\\\\"rechnungsdatum\\\\\\\",\\\\\\\"entspricht\\\\\\\",\\\\\\\"dem\\\\\\\",\\\\\\\"leistungsdatum\\\\\\\",\\\\\\\"pos\\\\\\\",\\\\\\\"art-nr.\\\\\\\",\\\\\\\"bezeichnung\\\\\\\",\\\\\\\"menge\\\\\\\",\\\\\\\"einzelpreis\\\\\\\",\\\\\\\"betrag\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"1234\\\\\\\",\\\\\\\"unkraut\\\\\\\",\\\\\\\"entfernt\\\\\\\",\\\\\\\"und\\\\\\\",\\\\\\\"rase\\\\\\\",\\\\\\\"gemäht\\\\\\\",\\\\\\\"4,5\\\\\\\",\\\\\\\"std.\\\\\\\",\\\\\\\"20,00\\\\\\\",\\\\\\\"90,00 €\\\\\\\",\\\\\\\"2\\\\\\\",\\\\\\\"5678\\\\\\\",\\\\\\\"weiterberechnung\\\\\\\",\\\\\\\"reinigungsmittel\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"17,00\\\\\\\",\\\\\\\"17,00 €\\\\\\\",\\\\\\\"nettobetrag\\\\\\\",\\\\\\\"107,00 €\\\\\\\",\\\\\\\"umsatzsteuer\\\\\\\",\\\\\\\"19%\\\\\\\",\\\\\\\"20,33€\\\\\\\",\\\\\\\"€\\\\\\\",\\\\\\\"rechnungsbetrag\\\\\\\",\\\\\\\"127,33\\\\\\\",\\\\\\\"€\\\\\\\",\\\\\\\"vielen\\\\\\\",\\\\\\\"dank\\\\\\\",\\\\\\\"für\\\\\\\",\\\\\\\"ihren\\\\\\\",\\\\\\\"auftrag!\\\\\\\",\\\\\\\"bitte\\\\\\\",\\\\\\\"begleichen\\\\\\\",\\\\\\\"sie\\\\\\\",\\\\\\\"den\\\\\\\",\\\\\\\"offenen\\\\\\\",\\\\\\\"betrag\\\\\\\",\\\\\\\"bis\\\\\\\",\\\\\\\"zum\\\\\\\",\\\\\\\"01.07.2023\\\\\\\",\\\\\\\"an\\\\\\\",\\\\\\\"die\\\\\\\",\\\\\\\"unten\\\\\\\",\\\\\\\"aufgeführte\\\\\\\",\\\\\\\"bankverbindung.\\\\\\\",\\\\\\\"mit\\\\\\\",\\\\\\\"freundlichen\\\\\\\",\\\\\\\"grüßen\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"zahlungsempfänger\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"bankverbindung\\\\\\\",\\\\\\\"deutsche\\\\\\\",\\\\\\\"bank\\\\\\\",\\\\\\\"ag\\\\\\\",\\\\\\\"bic\\\\\\\",\\\\\\\"xxx12345,\\\\\\\",\\\\\\\"iban\\\\\\\",\\\\\\\"de12387654321\\\\\\\"]\\\",\\\"invoice\\\":\\\"{\\\\\\\"isinvoice\\\\\\\":true,\\\\\\\"Betrag\\\\\\\":\\\\\\\"90,00 €\\\\\\\",\\\\\\\"Transportauftragsnummer\\\\\\\":null}\\\",\\\"pod\\\":\\\"{\\\\\\\"isPOD\\\\\\\":false,\\\\\\\"Unterschrift\\\\\\\":false}\\\",\\\"order\\\":\\\"{\\\\\\\"isorder\\\\\\\":false,\\\\\\\"Betrag\\\\\\\":null}\\\",\\\"__v\\\":0}\"],\"Auftrag\":[\"{\\\"_id\\\":\\\"65ab886c8bf8c398eb893e43\\\",\\\"filename\\\":\\\"Auftrag 3-0.jpg\\\",\\\"text\\\":\\\"[\\\\\\\"firmenlogo\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"-\\\\\\\",\\\\\\\"musterstr.\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"-\\\\\\\",\\\\\\\"41321\\\\\\\",\\\\\\\"musterstadt\\\\\\\",\\\\\\\"frau\\\\\\\",\\\\\\\"britta\\\\\\\",\\\\\\\"beispiel\\\\\\\",\\\\\\\"beispielstr.\\\\\\\",\\\\\\\"27\\\\\\\",\\\\\\\"54657\\\\\\\",\\\\\\\"beispielstadt\\\\\\\",\\\\\\\"deutschland\\\\\\\",\\\\\\\"so\\\\\\\",\\\\\\\"erreichen\\\\\\\",\\\\\\\"sie\\\\\\\",\\\\\\\"uns\\\\\\\",\\\\\\\"internet\\\\\\\",\\\\\\\"www.mustermann.de\\\\\\\",\\\\\\\"e-mail\\\\\\\",\\\\\\\"max@muster.de\\\\\\\",\\\\\\\"telefon\\\\\\\",\\\\\\\"01234/987654-0\\\\\\\",\\\\\\\"telefax\\\\\\\",\\\\\\\"01234/987654-1\\\\\\\",\\\\\\\"mobil\\\\\\\",\\\\\\\"01234/987654-2\\\\\\\",\\\\\\\"steuer-nr.\\\\\\\",\\\\\\\"122/5432/1234\\\\\\\",\\\\\\\"ust-idnr.\\\\\\\",\\\\\\\"de123456789\\\\\\\",\\\\\\\"datum\\\\\\\",\\\\\\\"01.01.2023\\\\\\\",\\\\\\\"kunde\\\\\\\",\\\\\\\"123456\\\\\\\",\\\\\\\"rechnung\\\\\\\",\\\\\\\"202210001\\\\\\\",\\\\\\\"sehr\\\\\\\",\\\\\\\"geehrte\\\\\\\",\\\\\\\"frau\\\\\\\",\\\\\\\"beispiel,\\\\\\\",\\\\\\\"nachfolgend\\\\\\\",\\\\\\\"berechnen\\\\\\\",\\\\\\\"wir\\\\\\\",\\\\\\\"ihnen\\\\\\\",\\\\\\\"wie\\\\\\\",\\\\\\\"vorab\\\\\\\",\\\\\\\"besprochen:\\\\\\\",\\\\\\\"rechnung\\\\\\\",\\\\\\\"202210001\\\\\\\",\\\\\\\"das\\\\\\\",\\\\\\\"rechnungsdatum\\\\\\\",\\\\\\\"entspricht\\\\\\\",\\\\\\\"dem\\\\\\\",\\\\\\\"leistungsdatum\\\\\\\",\\\\\\\"pos\\\\\\\",\\\\\\\"art-nr.\\\\\\\",\\\\\\\"bezeichnung\\\\\\\",\\\\\\\"menge\\\\\\\",\\\\\\\"einzelpreis\\\\\\\",\\\\\\\"betrag\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"1234\\\\\\\",\\\\\\\"unkraut\\\\\\\",\\\\\\\"entfernt\\\\\\\",\\\\\\\"und\\\\\\\",\\\\\\\"rase\\\\\\\",\\\\\\\"gemäht\\\\\\\",\\\\\\\"4,5\\\\\\\",\\\\\\\"std.\\\\\\\",\\\\\\\"20,00\\\\\\\",\\\\\\\"90,00 €\\\\\\\",\\\\\\\"2\\\\\\\",\\\\\\\"5678\\\\\\\",\\\\\\\"weiterberechnung\\\\\\\",\\\\\\\"reinigungsmittel\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"17,00\\\\\\\",\\\\\\\"17,00 €\\\\\\\",\\\\\\\"nettobetrag\\\\\\\",\\\\\\\"107,00 €\\\\\\\",\\\\\\\"umsatzsteuer\\\\\\\",\\\\\\\"19%\\\\\\\",\\\\\\\"20,33€\\\\\\\",\\\\\\\"€\\\\\\\",\\\\\\\"rechnungsbetrag\\\\\\\",\\\\\\\"127,33\\\\\\\",\\\\\\\"€\\\\\\\",\\\\\\\"vielen\\\\\\\",\\\\\\\"dank\\\\\\\",\\\\\\\"für\\\\\\\",\\\\\\\"ihren\\\\\\\",\\\\\\\"auftrag!\\\\\\\",\\\\\\\"bitte\\\\\\\",\\\\\\\"begleichen\\\\\\\",\\\\\\\"sie\\\\\\\",\\\\\\\"den\\\\\\\",\\\\\\\"offenen\\\\\\\",\\\\\\\"betrag\\\\\\\",\\\\\\\"bis\\\\\\\",\\\\\\\"zum\\\\\\\",\\\\\\\"01.07.2023\\\\\\\",\\\\\\\"an\\\\\\\",\\\\\\\"die\\\\\\\",\\\\\\\"unten\\\\\\\",\\\\\\\"aufgeführte\\\\\\\",\\\\\\\"bankverbindung.\\\\\\\",\\\\\\\"mit\\\\\\\",\\\\\\\"freundlichen\\\\\\\",\\\\\\\"grüßen\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"zahlungsempfänger\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"bankverbindung\\\\\\\",\\\\\\\"deutsche\\\\\\\",\\\\\\\"bank\\\\\\\",\\\\\\\"ag\\\\\\\",\\\\\\\"bic\\\\\\\",\\\\\\\"xxx12345,\\\\\\\",\\\\\\\"iban\\\\\\\",\\\\\\\"de12387654321\\\\\\\"]\\\",\\\"invoice\\\":\\\"{\\\\\\\"isinvoice\\\\\\\":false,\\\\\\\"Betrag\\\\\\\":null,\\\\\\\"Transportauftragsnummer\\\\\\\":null}\\\",\\\"pod\\\":\\\"{\\\\\\\"isPOD\\\\\\\":false,\\\\\\\"Unterschrift\\\\\\\":false}\\\",\\\"order\\\":\\\"{\\\\\\\"isorder\\\\\\\":true,\\\\\\\"Betrag\\\\\\\":\\\\\\\"127.00\\\\\\\"}\\\",\\\"__v\\\":0}\"],\"POD\":[\"{\\\"_id\\\":\\\"65ab880b8bf8c398eb893e2b\\\",\\\"filename\\\":\\\"POD 3-0.jpg\\\",\\\"text\\\":\\\"[\\\\\\\"firmenlogo\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"-\\\\\\\",\\\\\\\"musterstr.\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"-\\\\\\\",\\\\\\\"41321\\\\\\\",\\\\\\\"musterstadt\\\\\\\",\\\\\\\"frau\\\\\\\",\\\\\\\"britta\\\\\\\",\\\\\\\"beispiel\\\\\\\",\\\\\\\"beispielstr.\\\\\\\",\\\\\\\"27\\\\\\\",\\\\\\\"54657\\\\\\\",\\\\\\\"beispielstadt\\\\\\\",\\\\\\\"deutschland\\\\\\\",\\\\\\\"so\\\\\\\",\\\\\\\"erreichen\\\\\\\",\\\\\\\"sie\\\\\\\",\\\\\\\"uns\\\\\\\",\\\\\\\"internet\\\\\\\",\\\\\\\"www.mustermann.de\\\\\\\",\\\\\\\"e-mail\\\\\\\",\\\\\\\"max@muster.de\\\\\\\",\\\\\\\"telefon\\\\\\\",\\\\\\\"01234/987654-0\\\\\\\",\\\\\\\"telefax\\\\\\\",\\\\\\\"01234/987654-1\\\\\\\",\\\\\\\"mobil\\\\\\\",\\\\\\\"01234/987654-2\\\\\\\",\\\\\\\"steuer-nr.\\\\\\\",\\\\\\\"122/5432/1234\\\\\\\",\\\\\\\"ust-idnr.\\\\\\\",\\\\\\\"de123456789\\\\\\\",\\\\\\\"datum\\\\\\\",\\\\\\\"01.01.2023\\\\\\\",\\\\\\\"kunde\\\\\\\",\\\\\\\"123456\\\\\\\",\\\\\\\"rechnung\\\\\\\",\\\\\\\"202210001\\\\\\\",\\\\\\\"sehr\\\\\\\",\\\\\\\"geehrte\\\\\\\",\\\\\\\"frau\\\\\\\",\\\\\\\"beispiel,\\\\\\\",\\\\\\\"nachfolgend\\\\\\\",\\\\\\\"berechnen\\\\\\\",\\\\\\\"wir\\\\\\\",\\\\\\\"ihnen\\\\\\\",\\\\\\\"wie\\\\\\\",\\\\\\\"vorab\\\\\\\",\\\\\\\"besprochen:\\\\\\\",\\\\\\\"rechnung\\\\\\\",\\\\\\\"202210001\\\\\\\",\\\\\\\"das\\\\\\\",\\\\\\\"rechnungsdatum\\\\\\\",\\\\\\\"entspricht\\\\\\\",\\\\\\\"dem\\\\\\\",\\\\\\\"leistungsdatum\\\\\\\",\\\\\\\"pos\\\\\\\",\\\\\\\"art-nr.\\\\\\\",\\\\\\\"bezeichnung\\\\\\\",\\\\\\\"menge\\\\\\\",\\\\\\\"einzelpreis\\\\\\\",\\\\\\\"betrag\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"1234\\\\\\\",\\\\\\\"unkraut\\\\\\\",\\\\\\\"entfernt\\\\\\\",\\\\\\\"und\\\\\\\",\\\\\\\"rase\\\\\\\",\\\\\\\"gemäht\\\\\\\",\\\\\\\"4,5\\\\\\\",\\\\\\\"std.\\\\\\\",\\\\\\\"20,00\\\\\\\",\\\\\\\"90,00 €\\\\\\\",\\\\\\\"2\\\\\\\",\\\\\\\"5678\\\\\\\",\\\\\\\"weiterberechnung\\\\\\\",\\\\\\\"reinigungsmittel\\\\\\\",\\\\\\\"1\\\\\\\",\\\\\\\"17,00\\\\\\\",\\\\\\\"17,00 €\\\\\\\",\\\\\\\"nettobetrag\\\\\\\",\\\\\\\"107,00 €\\\\\\\",\\\\\\\"umsatzsteuer\\\\\\\",\\\\\\\"19%\\\\\\\",\\\\\\\"20,33€\\\\\\\",\\\\\\\"€\\\\\\\",\\\\\\\"rechnungsbetrag\\\\\\\",\\\\\\\"127,33\\\\\\\",\\\\\\\"€\\\\\\\",\\\\\\\"vielen\\\\\\\",\\\\\\\"dank\\\\\\\",\\\\\\\"für\\\\\\\",\\\\\\\"ihren\\\\\\\",\\\\\\\"auftrag!\\\\\\\",\\\\\\\"bitte\\\\\\\",\\\\\\\"begleichen\\\\\\\",\\\\\\\"sie\\\\\\\",\\\\\\\"den\\\\\\\",\\\\\\\"offenen\\\\\\\",\\\\\\\"betrag\\\\\\\",\\\\\\\"bis\\\\\\\",\\\\\\\"zum\\\\\\\",\\\\\\\"01.07.2023\\\\\\\",\\\\\\\"an\\\\\\\",\\\\\\\"die\\\\\\\",\\\\\\\"unten\\\\\\\",\\\\\\\"aufgeführte\\\\\\\",\\\\\\\"bankverbindung.\\\\\\\",\\\\\\\"mit\\\\\\\",\\\\\\\"freundlichen\\\\\\\",\\\\\\\"grüßen\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"zahlungsempfänger\\\\\\\",\\\\\\\"max\\\\\\\",\\\\\\\"mustermann\\\\\\\",\\\\\\\"bankverbindung\\\\\\\",\\\\\\\"deutsche\\\\\\\",\\\\\\\"bank\\\\\\\",\\\\\\\"ag\\\\\\\",\\\\\\\"bic\\\\\\\",\\\\\\\"xxx12345,\\\\\\\",\\\\\\\"iban\\\\\\\",\\\\\\\"de12387654321\\\\\\\"]\\\",\\\"invoice\\\":\\\"{\\\\\\\"isinvoice\\\\\\\":false,\\\\\\\"Betrag\\\\\\\":null,\\\\\\\"Transportauftragsnummer\\\\\\\":null}\\\",\\\"pod\\\":\\\"{\\\\\\\"isPOD\\\\\\\":true,\\\\\\\"Unterschrift\\\\\\\":false}\\\",\\\"order\\\":\\\"{\\\\\\\"isorder\\\\\\\":false,\\\\\\\"Betrag\\\\\\\":null}\\\",\\\"__v\\\":0}\"]}",
      "__v": 0
    }]);
  })
  
});
